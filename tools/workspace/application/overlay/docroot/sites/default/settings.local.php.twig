<?php

assert_options(ASSERT_ACTIVE, TRUE);
\Drupal\Component\Assertion\Handle::register();

$settings['container_yamls'][] = DRUPAL_ROOT . '/sites/default/services.local.yml';

$settings['file_private_path'] = '../private';

$config['simple_sitemap.settings']['base_url'] = 'https://opigno-sandbox.my127.site';

$config['commerce_payment.commerce_payment_gateway.stripe_payment']['configuration']['publishable_key'] = getenv('STRIPE_PUBLISHABLE_KEY');
$config['commerce_payment.commerce_payment_gateway.stripe_payment']['configuration']['secret_key'] = getenv('STRIPE_SECRET_KEY');

$config['config_split.config_split.development']['status'] = TRUE;
$config['environment_indicator.indicator']['name'] = 'Local (Workspace)';
$config['environment_indicator.indicator']['bg_color'] = '#3E7054';
$config['environment_indicator.indicator']['fg_color'] = '#FFF';

$config['system.logging']['error_level'] = 'verbose';

$config['system.performance']['css']['preprocess'] = FALSE;
$config['system.performance']['js']['preprocess'] = FALSE;
$config['advagg.settings']['enabled'] = FALSE;

$settings['cache']['bins']['render'] = 'cache.backend.null';
$settings['cache']['bins']['discovery_migration'] = 'cache.backend.memory';
$settings['cache']['bins']['page'] = 'cache.backend.null';
$settings['cache']['bins']['dynamic_page_cache'] = 'cache.backend.null';

$settings['rebuild_access'] = TRUE;
$settings['skip_permissions_hardening'] = TRUE;

$settings['hash_salt'] = getenv('DRUPAL_SALT');

$databases['default']['default'] = [
  'database'  => getenv('DB_NAME'),
  'username'  => getenv('DB_USER'),
  'password'  => getenv('DB_PASS'),
  'host'      => getenv('DB_HOST'),
  'prefix'    => '',
  'port'      => '3306',
  'namespace' => 'Drupal\\Core\\Database\\Driver\\mysql',
  'driver'    => 'mysql',
];

$base_url = "https://opigno-sandbox.my127.site/";
$settings['trusted_host_patterns'][] = '.*\.my127\.site$';